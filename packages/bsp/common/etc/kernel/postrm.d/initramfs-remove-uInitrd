#!/bin/sh

# Remove /boot/uInitrd-${version} created by /etc/initramfs/post-update.d/99-uboot
# Unfortunately, `update-initramfs` only support `post-update.d`, doesn't have something like `post-delete.d`
# So let's clean it when we remove a kernel.

version="$1"

# avoid running multiple times
# Use the same conditions as `initramfs-tools`.
if [ -n "$DEB_MAINT_PARAMS" ]; then
	eval set -- "$DEB_MAINT_PARAMS"
	if [ -z "$1" ] || [ "$1" != "remove" ]; then
		exit 0
	fi
fi

rm -f "/boot/uInitrd-${version}"

exit 0
