From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Werner <werner@armbian.com>
Date: Thu, 11 Dec 2025 04:45:12 +0000
Subject: Fix compilation of uwe5622 in Linux 6.18

Signed-off-by: Werner <werner@armbian.com>
---
 drivers/net/wireless/uwe5622/unisocwcn/platform/wcn_boot.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/drivers/net/wireless/uwe5622/unisocwcn/platform/wcn_boot.c b/drivers/net/wireless/uwe5622/unisocwcn/platform/wcn_boot.c
index 1558f1c03de0..07dd4528bf12 100644
--- a/drivers/net/wireless/uwe5622/unisocwcn/platform/wcn_boot.c
+++ b/drivers/net/wireless/uwe5622/unisocwcn/platform/wcn_boot.c
@@ -1382,12 +1382,14 @@ static int marlin_registsr_bt_wake(struct device *dev)
 		WCN_ERR("bt_hostwake irq is invalid: %d\n",
 			bt_wake_host_gpio);
 		return -EINVAL;
 	}
 
-	ret = devm_gpio_request(dev, bt_wake_host_gpio,
-				"bt-wake-host-gpio");
+	struct gpio_desc *desc = devm_gpiod_get(dev, "bt-wake-host-gpio", GPIOD_OUT_LOW);
+	if (IS_ERR(desc))
+		return PTR_ERR(desc);
+
 	if (ret) {
 		WCN_ERR("bt-wake-host-gpio request err: %d\n",
 			bt_wake_host_gpio);
 		return ret;
 	}
-- 
Armbian

