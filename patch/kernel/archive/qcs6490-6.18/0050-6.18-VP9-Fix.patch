From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Mecid Urganci <mecid@mecomediagroup.de>
Date: Tue, 10 Dec 2025 00:00:00 +0000
Subject: Fix VP9 decode on SC7280 by restricting EOS quirk to IRIS2

Send NULL EOS addr for only IRIS2 (SM8250), for firmware <= 1.0.87.
SC7280 also reports "1.0.<hash>" parsed as 1.0.0; restricting to IRIS2
avoids misapplying this quirk and breaking VP9 decode on SC7280.
---
 drivers/media/platform/qcom/venus/vdec.c | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/drivers/media/platform/qcom/venus/vdec.c b/drivers/media/platform/qcom/venus/vdec.c
index 111111111111..222222222222 100644
--- a/drivers/media/platform/qcom/venus/vdec.c
+++ b/drivers/media/platform/qcom/venus/vdec.c
@@ -566,9 +566,15 @@
 			goto unlock;
 
 		fdata.buffer_type = HFI_BUFFER_INPUT;
 		fdata.flags |= HFI_BUFFERFLAG_EOS;
-		if (IS_V6(inst->core) && is_fw_rev_or_older(inst->core, 1, 0, 87))
+		
+		/* Send NULL EOS addr for only IRIS2 (SM8250),for firmware <= 1.0.87.
+		 * SC7280 also reports "1.0.<hash>" parsed as 1.0.0; restricting to IRIS2
+		 * avoids misapplying this quirk and breaking VP9 decode on SC7280.
+		 */
+
+		if (IS_IRIS2(inst->core) && is_fw_rev_or_older(inst->core, 1, 0, 87))
 			fdata.device_addr = 0;
 		else
 			fdata.device_addr = 0xdeadb000;
