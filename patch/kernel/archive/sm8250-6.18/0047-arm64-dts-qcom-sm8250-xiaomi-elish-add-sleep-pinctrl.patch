From 30d1e729b2017cb03589da7ad5c09cf287c23ead Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Dawid=20Wro=CC=81bel?= <me@dawidwrobel.com>
Date: Mon, 27 Oct 2025 14:55:14 +0100
Subject: [PATCH 47/62] arm64: dts: qcom: sm8250-xiaomi-elish: add sleep
 pinctrl states for BT and WLAN
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Add pinctrl sleep states for Bluetooth and WLAN on Xiaomi Elish platform.

Signed-off-by: Dawid Wr√≥bel <me@dawidwrobel.com>
Signed-off-by: Jiali Chen <chenjiali@radxa.com>
---
 .../dts/qcom/sm8250-xiaomi-elish-common.dtsi  | 25 ++++++++++++++++---
 1 file changed, 21 insertions(+), 4 deletions(-)

diff --git a/arch/arm64/boot/dts/qcom/sm8250-xiaomi-elish-common.dtsi b/arch/arm64/boot/dts/qcom/sm8250-xiaomi-elish-common.dtsi
index 1e901e2ff678..d7948e720b3e 100644
--- a/arch/arm64/boot/dts/qcom/sm8250-xiaomi-elish-common.dtsi
+++ b/arch/arm64/boot/dts/qcom/sm8250-xiaomi-elish-common.dtsi
@@ -86,8 +86,9 @@ key-vol-up {
 	qca6390-pmu {
 		compatible = "qcom,qca6390-pmu";
 
-		pinctrl-names = "default";
-		pinctrl-0 = <&bt_en_state>, <&wlan_en_state>;
+		pinctrl-names = "default", "sleep";
+		pinctrl-0 = <&bt_en_active>, <&wlan_en_active>;
+		pinctrl-1 = <&bt_en_sleep>, <&wlan_en_sleep>;
 
 		vddaon-supply = <&vreg_s6a_0p95>;
 		vddpmu-supply = <&vreg_s6a_0p95>;
@@ -1112,7 +1113,7 @@ touchscreen: touchscreen@0 {
 &tlmm {
 	gpio-reserved-ranges = <40 4>;
 
-	bt_en_state: bt-default-state {
+	bt_en_active: bt-default-state {
 		pins = "gpio21";
 		function = "gpio";
 		drive-strength = <16>;
@@ -1120,7 +1121,15 @@ bt_en_state: bt-default-state {
 		bias-pull-up;
 	};
 
-	wlan_en_state: wlan-default-state {
+	bt_en_sleep: bt-sleep-state {
+		pins = "gpio21";
+		function = "gpio";
+		drive-strength = <2>;
+		output-low;
+		bias-pull-down;
+	};
+
+	wlan_en_active: wlan-default-state {
 		pins = "gpio20";
 		function = "gpio";
 		drive-strength = <16>;
@@ -1128,6 +1137,14 @@ wlan_en_state: wlan-default-state {
 		bias-pull-up;
 	};
 
+	wlan_en_sleep: wlan-sleep-state {
+		pins = "gpio20";
+		function = "gpio";
+		drive-strength = <2>;
+		output-low;
+		bias-pull-down;
+	};
+
 	tert_tdm_active: tert-tdm-active-state {
 		sck-pins {
 			pins = "gpio133";
-- 
2.47.3

