From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: HackingGate <i@hackinggate.com>
Date: Fri, 10 Oct 2025 02:31:42 +0900
Subject: [PATCH] fix: update USB controller clock names and add reset names in
 RK3576 device tree

---
 arch/arm64/boot/dts/rockchip/rk3576.dtsi | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/arch/arm64/boot/dts/rockchip/rk3576.dtsi b/arch/arm64/boot/dts/rockchip/rk3576.dtsi
index c3cdae8a5494..ba6c49bafd6a 100644
--- a/arch/arm64/boot/dts/rockchip/rk3576.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3576.dtsi
@@ -648,10 +648,11 @@ usb_drd0_dwc3: usb@23000000 {
 			clocks = <&cru CLK_REF_USB3OTG0>,
 				 <&cru CLK_SUSPEND_USB3OTG0>,
 				 <&cru ACLK_USB3OTG0>;
-			clock-names = "ref_clk", "suspend_clk", "bus_clk";
+			clock-names = "ref", "suspend", "bus_clk";
 			interrupts = <GIC_SPI 261 IRQ_TYPE_LEVEL_HIGH>;
 			power-domains = <&power RK3576_PD_USB>;
 			resets = <&cru SRST_A_USB3OTG0>;
+			reset-names = "usb3-otg";
 			dr_mode = "otg";
 			phys = <&u2phy0_otg>, <&usbdp_phy PHY_TYPE_USB3>;
 			phy-names = "usb2-phy", "usb3-phy";
@@ -662,6 +663,7 @@ usb_drd0_dwc3: usb@23000000 {
 			snps,dis-u2-freeclk-exists-quirk;
 			snps,dis-del-phy-power-chg-quirk;
 			snps,dis-tx-ipgap-linecheck-quirk;
+			snps,dis_u2_susphy_quirk;
 			snps,parkmode-disable-hs-quirk;
 			snps,parkmode-disable-ss-quirk;
 			status = "disabled";
@@ -673,10 +675,11 @@ usb_drd1_dwc3: usb@23400000 {
 			clocks = <&cru CLK_REF_USB3OTG1>,
 				 <&cru CLK_SUSPEND_USB3OTG1>,
 				 <&cru ACLK_USB3OTG1>;
-			clock-names = "ref_clk", "suspend_clk", "bus_clk";
+			clock-names = "ref", "suspend", "bus_clk";
 			interrupts = <GIC_SPI 260 IRQ_TYPE_LEVEL_HIGH>;
 			power-domains = <&power RK3576_PD_PHP>;
 			resets = <&cru SRST_A_USB3OTG1>;
+			reset-names = "usb3-otg";
 			dr_mode = "otg";
 			phys = <&u2phy1_otg>, <&combphy1_psu PHY_TYPE_USB3>;
 			phy-names = "usb2-phy", "usb3-phy";
@@ -688,6 +691,7 @@ usb_drd1_dwc3: usb@23400000 {
 			snps,dis-del-phy-power-chg-quirk;
 			snps,dis-tx-ipgap-linecheck-quirk;
 			snps,dis_rxdet_inp3_quirk;
+			snps,dis_u2_susphy_quirk;
 			snps,parkmode-disable-hs-quirk;
 			snps,parkmode-disable-ss-quirk;
 			dma-coherent;
-- 
2.47.3

