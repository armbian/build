From 1df05e792be118169a7107150d6f4d39628521ab Mon Sep 17 00:00:00 2001
From: Ondrej Jirman <megous@megous.com>
Date: Thu, 6 Jan 2022 15:04:18 +0100
Subject: [PATCH 096/446] 8723cs: Clear wowlan_last_wake_reason prior to
 suspend

Signed-off-by: Ondrej Jirman <megous@megous.com>
---
 drivers/staging/rtl8723cs/os_dep/linux/os_intfs.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/staging/rtl8723cs/os_dep/linux/os_intfs.c b/drivers/staging/rtl8723cs/os_dep/linux/os_intfs.c
index c982c2d04..86572d7c1 100644
--- a/drivers/staging/rtl8723cs/os_dep/linux/os_intfs.c
+++ b/drivers/staging/rtl8723cs/os_dep/linux/os_intfs.c
@@ -4904,6 +4904,8 @@ int rtw_suspend_wow(_adapter *padapter)
 #endif
 
 	if (pwrpriv->wowlan_mode == _TRUE) {
+		pwrpriv->wowlan_last_wake_reason = 0;
+
 		rtw_mi_netif_stop_queue(padapter);
 		#ifdef CONFIG_CONCURRENT_MODE
 		rtw_mi_buddy_netif_carrier_off(padapter);
-- 
2.31.1

