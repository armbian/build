From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: pixdrift <devnull@pixeldrift.net>
Date: Tue, 2 Jan 2024 20:45:18 +0000
Subject: Patching cpufreq driver to support h618 processor using h616
 configuration

Signed-off-by: pixdrift <devnull@pixeldrift.net>
---
 drivers/cpufreq/cpufreq-dt-platdev.c   | 1 +
 drivers/cpufreq/sun50i-cpufreq-nvmem.c | 1 +
 2 files changed, 2 insertions(+)

diff --git a/drivers/cpufreq/cpufreq-dt-platdev.c b/drivers/cpufreq/cpufreq-dt-platdev.c
index 1cab455c0aaf..86a070e5b26e 100644
--- a/drivers/cpufreq/cpufreq-dt-platdev.c
+++ b/drivers/cpufreq/cpufreq-dt-platdev.c
@@ -103,10 +103,11 @@ static const struct of_device_id allowlist[] __initconst = {
  * platforms using "operating-points-v2" property.
  */
 static const struct of_device_id blocklist[] __initconst = {
 	{ .compatible = "allwinner,sun50i-h6", },
 	{ .compatible = "allwinner,sun50i-h616", },
+	{ .compatible = "allwinner,sun50i-h618", },

 	{ .compatible = "apple,arm-platform", },

 	{ .compatible = "arm,vexpress", },

diff --git a/drivers/cpufreq/sun50i-cpufreq-nvmem.c b/drivers/cpufreq/sun50i-cpufreq-nvmem.c
index 5d85bfe475de..51d7010c49a7 100644
--- a/drivers/cpufreq/sun50i-cpufreq-nvmem.c
+++ b/drivers/cpufreq/sun50i-cpufreq-nvmem.c
@@ -202,10 +202,11 @@ static const struct sunxi_cpufreq_soc_data sun50i_h6_data = {
 };

 static const struct of_device_id sun50i_cpufreq_match_list[] = {
 	{ .compatible = "allwinner,sun50i-h6", .data = &sun50i_h6_data },
         { .compatible = "allwinner,sun50i-h616", .data = &sun50i_h616_data },
+        { .compatible = "allwinner,sun50i-h618", .data = &sun50i_h616_data },
 	{}
 };
 MODULE_DEVICE_TABLE(of, sun50i_cpufreq_match_list);

 static const struct of_device_id *sun50i_cpufreq_match_node(void)
--
Created with Armbian build tools https://github.com/armbian/build
