From 728ce5fbf9ac7b23c03ebd6ae6e450ffbf73ca29 Mon Sep 17 00:00:00 2001
From: Patrick Yavitz <pyavitz@armbian.com>
Date: Sat, 28 Dec 2024 19:50:44 -0500
Subject: [PATCH] Add board BananaPi BPI-F3

Signed-off-by: Patrick Yavitz <pyavitz@armbian.com>
---
 arch/riscv/boot/dts/spacemit/Makefile         |  1 +
 .../boot/dts/spacemit/k1-bananapi-f3.dts      | 23 +++++++++++++++++++
 2 files changed, 24 insertions(+)
 create mode 100644 arch/riscv/boot/dts/spacemit/k1-bananapi-f3.dts

diff --git a/arch/riscv/boot/dts/spacemit/Makefile b/arch/riscv/boot/dts/spacemit/Makefile
index 32f23816fe28..5036b31e5f7b 100644
--- a/arch/riscv/boot/dts/spacemit/Makefile
+++ b/arch/riscv/boot/dts/spacemit/Makefile
@@ -1,3 +1,4 @@
+dtb-$(CONFIG_SOC_SPACEMIT_K1X) += k1-bananapi-f3.dtb
 dtb-$(CONFIG_SOC_SPACEMIT_K1X) += k1-x_evb.dtb k1-x_deb2.dtb k1-x_deb1.dtb k1-x_hs450.dtb \
 				  k1-x_kx312.dtb k1-x_MINI-PC.dtb k1-x_MUSE-N1.dtb k1-x_mingo.dtb \
 				  k1-x_MUSE-Pi.dtb k1-x_milkv-jupiter.dtb m1-x_milkv-jupiter.dtb \
diff --git a/arch/riscv/boot/dts/spacemit/k1-bananapi-f3.dts b/arch/riscv/boot/dts/spacemit/k1-bananapi-f3.dts
new file mode 100644
index 000000000000..1ea3c80ae996
--- /dev/null
+++ b/arch/riscv/boot/dts/spacemit/k1-bananapi-f3.dts
@@ -0,0 +1,23 @@
+// SPDX-License-Identifier: (GPL-2.0 OR MIT)
+/* Copyright (c) 2024 Spacemit, Inc */
+
+/dts-v1/;
+
+#include "k1-x_deb1.dts"
+
+/ {
+	model = "BananaPi BPI-F3";
+};
+
+&uart2 {
+	status = "okay";
+	pinctrl-0 = <&pinctrl_uart2>, <&pinctrl_uart2_rts_cts>;
+	pinctrl-names = "default";
+	uart-has-rtscts;
+
+	bluetooth {
+		compatible = "realtek,rtl8852bs-bt";
+		device-wake-gpios = <&gpio 64 GPIO_ACTIVE_LOW>;
+		host-wake-gpios = <&gpio 65 GPIO_ACTIVE_HIGH>;
+	};
+};
-- 
2.39.5

