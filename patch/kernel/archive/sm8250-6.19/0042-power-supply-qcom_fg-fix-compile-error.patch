From 75a742505fe0b025e1ba5599ef8a82e9ff79ae80 Mon Sep 17 00:00:00 2001
From: Jianhua Lu <lujianhua000@gmail.com>
Date: Thu, 2 Oct 2025 16:43:00 +0800
Subject: [PATCH 42/62] power: supply: qcom_fg: fix compile error

Signed-off-by: Jiali Chen <chenjiali@radxa.com>
---
 drivers/power/supply/qcom_fg.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/drivers/power/supply/qcom_fg.c b/drivers/power/supply/qcom_fg.c
index 6423b0798ae3..73278ca5ad35 100644
--- a/drivers/power/supply/qcom_fg.c
+++ b/drivers/power/supply/qcom_fg.c
@@ -1207,7 +1207,7 @@ static int qcom_fg_probe(struct platform_device *pdev)
 	}
 
 	supply_config.drv_data = chip;
-	supply_config.of_node = pdev->dev.of_node;
+	supply_config.fwnode = pdev->dev.fwnode;
 
 	chip->batt_psy = devm_power_supply_register(chip->dev,
 			&batt_psy_desc, &supply_config);
@@ -1310,8 +1310,7 @@ static int qcom_fg_probe(struct platform_device *pdev)
 	}
 
 	/* Optional: Get charger power supply for status checking */
-	chip->chg_psy = power_supply_get_by_phandle(chip->dev->of_node,
-							"power-supplies");
+	chip->chg_psy = power_supply_get_by_name("power-supplies");
 	if (IS_ERR(chip->chg_psy)) {
 		ret = PTR_ERR(chip->chg_psy);
 		dev_warn(chip->dev, "Failed to get charger supply: %d\n", ret);
-- 
2.47.3

