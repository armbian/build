From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Ryzer58 <ryestar101@gmail.com>
Date: Sat, 10 Aug 2024 00:30:53 +0100
Subject: Fix system path aliasing on Allwinner A20 to synchronize interface numbers between hardware and software

Signed-off-by: Ryzer58 <ryestar101@gmail.com>
---
 arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c1.dtso          | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c2.dtso          | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c3.dtso          | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c4.dtso          | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi-jedec-nor.dtso | 6 +++---
 arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi-spidev.dtso    | 6 +++---
 arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi0.dtso          | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi1.dtso          | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi2.dtso          | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart2.dtso         | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart3.dtso         | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart4.dtso         | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart5.dtso         | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart6.dtso         | 2 +-
 arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart7.dtso         | 2 +-
 15 files changed, 19 insertions(+), 19 deletions(-)

diff --git a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c1.dtso b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c1.dtso
index c5f6e9732d3a..de7df6df380c 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c1.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c1.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun7i-a20";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			i2c1 = "/soc@1c00000/i2c@1c2b000";
+			i2c1 = "/soc/i2c@1c2b000";
 		};
 	};
 
 	fragment@1 {
 		target = <&i2c1>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c2.dtso b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c2.dtso
index fa93d1ed9b72..34c8b74055f9 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c2.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c2.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun7i-a20";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			i2c2 = "/soc@1c00000/i2c@1c2b400";
+			i2c2 = "/soc/i2c@1c2b400";
 		};
 	};
 
 	fragment@1 {
 		target = <&i2c2>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c3.dtso b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c3.dtso
index 945795c338e8..cb8657ca060c 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c3.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c3.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun7i-a20";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			i2c3 = "/soc@1c00000/i2c@1c2b800";
+			i2c3 = "/soc/i2c@1c2b800";
 		};
 	};
 
 	fragment@1 {
 		target = <&i2c3>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c4.dtso b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c4.dtso
index 4fcf08c2469b..d0136aea2afa 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c4.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-i2c4.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun7i-a20";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			i2c4 = "/soc@1c00000/i2c@1c2c000";
+			i2c4 = "/soc/i2c@1c2c000";
 		};
 	};
 
 	fragment@1 {
 		target = <&pio>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi-jedec-nor.dtso b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi-jedec-nor.dtso
index b91097eca5b6..3c02c58fc082 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi-jedec-nor.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi-jedec-nor.dtso
@@ -5,13 +5,13 @@ / {
 	compatible = "allwinner,sun7i-a20";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			spi0 = "/soc@1c00000/spi@1c05000";
-			spi1 = "/soc@1c00000/spi@1c06000";
-			spi2 = "/soc@1c00000/spi@1c17000";
+			spi0 = "/soc/spi@1c05000";
+			spi1 = "/soc/spi@1c06000";
+			spi2 = "/soc/spi@1c17000";
 		};
 	};
 
 	fragment@1 {
 		target = <&spi0>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi-spidev.dtso b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi-spidev.dtso
index 341fe3229ffc..f0f6453ff7b3 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi-spidev.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi-spidev.dtso
@@ -5,13 +5,13 @@ / {
 	compatible = "allwinner,sun7i-a20";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			spi0 = "/soc@1c00000/spi@1c05000";
-			spi1 = "/soc@1c00000/spi@1c06000";
-			spi2 = "/soc@1c00000/spi@1c17000";
+			spi0 = "/soc/spi@1c05000";
+			spi1 = "/soc/spi@1c06000";
+			spi2 = "/soc/spi@1c17000";
 		};
 	};
 
 	fragment@1 {
 		target = <&spi0>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi0.dtso b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi0.dtso
index cad50d8a29a7..7b4274d1540e 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi0.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi0.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun7i-a20";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			spi0 = "/soc@1c00000/spi@1c05000";
+			spi0 = "/soc/spi@1c05000";
 		};
 	};
 
 	fragment@1 {
 		target = <&spi0>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi1.dtso b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi1.dtso
index f0218eb9f76b..91edb0f87d12 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi1.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi1.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun7i-a20";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			spi1 = "/soc@1c00000/spi@1c06000";
+			spi1 = "/soc/spi@1c06000";
 		};
 	};
 
 	fragment@1 {
 		target = <&spi1>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi2.dtso b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi2.dtso
index effba42b48bd..5a41644b9086 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi2.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-spi2.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun7i-a20";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			spi2 = "/soc@1c00000/spi@1c17000";
+			spi2 = "/soc/spi@1c17000";
 		};
 	};
 
 	fragment@1 {
 		target = <&spi2>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart2.dtso b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart2.dtso
index 79d1dca7a311..4642c4106cf6 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart2.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart2.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun7i-a20";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			serial2 = "/soc@1c00000/serial@1c28800";
+			serial2 = "/soc/serial@1c28800";
 		};
 	};
 
 	fragment@1 {
 		target = <&pio>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart3.dtso b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart3.dtso
index 703acbcf377b..f151c6eb0ce3 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart3.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart3.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun7i-a20";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			serial3 = "/soc@1c00000/serial@1c28c00";
+			serial3 = "/soc/serial@1c28c00";
 		};
 	};
 
 	fragment@1 {
 		target = <&pio>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart4.dtso b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart4.dtso
index 19180341a67f..6f9915173f51 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart4.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart4.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun7i-a20";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			serial4 = "/soc@1c00000/serial@1c29000";
+			serial4 = "/soc/serial@1c29000";
 		};
 	};
 
 	fragment@1 {
 		target = <&uart4>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart5.dtso b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart5.dtso
index a1369eee2917..474d406c78d3 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart5.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart5.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun7i-a20";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			serial5 = "/soc@1c00000/serial@1c29400";
+			serial5 = "/soc/serial@1c29400";
 		};
 	};
 
 	fragment@1 {
 		target = <&uart5>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart6.dtso b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart6.dtso
index fb9efe2a9475..7a5518a86a02 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart6.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart6.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun7i-a20";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			serial6 = "/soc@1c00000/serial@1c29800";
+			serial6 = "/soc/serial@1c29800";
 		};
 	};
 
 	fragment@1 {
 		target = <&uart6>;
diff --git a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart7.dtso b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart7.dtso
index bbdca3ec67ed..7687a012fcbd 100644
--- a/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart7.dtso
+++ b/arch/arm/boot/dts/allwinner/overlay/sun7i-a20-uart7.dtso
@@ -5,11 +5,11 @@ / {
 	compatible = "allwinner,sun7i-a20";
 
 	fragment@0 {
 		target-path = "/aliases";
 		__overlay__ {
-			serial7 = "/soc@1c00000/serial@1c29c00";
+			serial7 = "/soc/serial@1c29c00";
 		};
 	};
 
 	fragment@1 {
 		target = <&uart7>;
-- 
Created with Armbian build tools https://github.com/armbian/build

