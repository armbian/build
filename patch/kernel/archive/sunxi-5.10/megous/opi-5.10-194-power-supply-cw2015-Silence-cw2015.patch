From 3e3b4e44b140930f54de4a0bde3e6a7da7d7d3b2 Mon Sep 17 00:00:00 2001
From: Ondrej Jirman <megous@megous.com>
Date: Tue, 14 Jul 2020 02:49:52 +0200
Subject: [PATCH 194/351] power: supply: cw2015: Silence cw2015

It's too annoying in the log

Signed-off-by: Ondrej Jirman <megous@megous.com>
---
 drivers/power/supply/cw2015_battery.c    | 3 ++-
 drivers/power/supply/power_supply_core.c | 2 +-
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/drivers/power/supply/cw2015_battery.c b/drivers/power/supply/cw2015_battery.c
index 0146f1bfc29b..7f2a4e8c8bbd 100644
--- a/drivers/power/supply/cw2015_battery.c
+++ b/drivers/power/supply/cw2015_battery.c
@@ -673,7 +673,8 @@ static int cw_bat_probe(struct i2c_client *client)
 						    &cw2015_bat_desc,
 						    &psy_cfg);
 	if (IS_ERR(cw_bat->rk_bat)) {
-		dev_err(cw_bat->dev, "Failed to register power supply\n");
+		if (PTR_ERR(cw_bat->rk_bat) != -EPROBE_DEFER)
+			dev_err(cw_bat->dev, "Failed to register power supply\n");
 		return PTR_ERR(cw_bat->rk_bat);
 	}
 
diff --git a/drivers/power/supply/power_supply_core.c b/drivers/power/supply/power_supply_core.c
index 38e3aa642131..50071bedbe72 100644
--- a/drivers/power/supply/power_supply_core.c
+++ b/drivers/power/supply/power_supply_core.c
@@ -1143,7 +1143,7 @@ __power_supply_register(struct device *parent,
 
 	rc = power_supply_check_supplies(psy);
 	if (rc) {
-		dev_info(dev, "Not all required supplies found, defer probe\n");
+		//dev_info(dev, "Not all required supplies found, defer probe\n");
 		goto check_supplies_failed;
 	}
 
-- 
2.33.1

