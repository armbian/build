From d622b434e0d6a3a538f5373ffb33f15f1a707407 Mon Sep 17 00:00:00 2001
From: Ondrej Jirman <megi@xff.cz>
Date: Sun, 6 Apr 2025 01:59:45 +0200
Subject: [PATCH 19/21] nvmem: rockchip-otp: Add support for RK3506

Adapted from BSP

Signed-off-by: Ondrej Jirman <megi@xff.cz>
---
 drivers/nvmem/rockchip-otp.c | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

diff --git a/drivers/nvmem/rockchip-otp.c b/drivers/nvmem/rockchip-otp.c
index 8bf22de22692..d0b26f7542a8 100644
--- a/drivers/nvmem/rockchip-otp.c
+++ b/drivers/nvmem/rockchip-otp.c
@@ -359,6 +359,17 @@ static const struct rockchip_data rk3576_data = {
 	.reg_read = rk3588_otp_read,
 };
 
+static const char * const rk3506_otp_clocks[] = {
+	"usr", "sbpi", "apb",
+};
+
+static const struct rockchip_data rk3506_data = {
+	.size = 0x80,
+	.clks = rk3506_otp_clocks,
+	.num_clks = ARRAY_SIZE(rk3506_otp_clocks),
+	.reg_read = rk3568_otp_read,
+};
+
 static const char * const rk3588_otp_clocks[] = {
 	"otp", "apb_pclk", "phy", "arb",
 };
@@ -384,6 +395,10 @@ static const struct of_device_id rockchip_otp_match[] = {
 		.compatible = "rockchip,rk3308-otp",
 		.data = &px30_data,
 	},
+	{
+		.compatible = "rockchip,rk3506-otp",
+		.data = &rk3506_data,
+	},
 	{
 		.compatible = "rockchip,rk3576-otp",
 		.data = &rk3576_data,
-- 
2.43.0

