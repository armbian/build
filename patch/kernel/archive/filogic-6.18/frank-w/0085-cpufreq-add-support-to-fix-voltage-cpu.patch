From 1e067954013fc7cbe7a2e44125f9412de87eedba Mon Sep 17 00:00:00 2001
From: Frank Wunderlich <frank-w@public-files.de>
Date: Wed, 3 Sep 2025 20:16:03 +0200
Subject: [PATCH 085/116] cpufreq: add support to fix voltage cpu

---
 drivers/cpufreq/mediatek-cpufreq.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/drivers/cpufreq/mediatek-cpufreq.c b/drivers/cpufreq/mediatek-cpufreq.c
index 5d50a231f944..79447a89bec8 100644
--- a/drivers/cpufreq/mediatek-cpufreq.c
+++ b/drivers/cpufreq/mediatek-cpufreq.c
@@ -23,6 +23,8 @@ struct mtk_cpufreq_platform_data {
 	int sram_min_volt;
 	int sram_max_volt;
 	bool ccifreq_supported;
+	/* Flag indicating whether the processor voltage is fixed */
+	bool proc_fixed_volt;
 };
 
 /*
@@ -164,6 +166,9 @@ static int mtk_cpufreq_set_voltage(struct mtk_cpu_dvfs_info *info, int vproc)
 	const struct mtk_cpufreq_platform_data *soc_data = info->soc_data;
 	int ret;
 
+	if (soc_data->proc_fixed_volt)
+		return 0;
+
 	if (info->need_voltage_tracking)
 		ret = mtk_cpufreq_voltage_tracking(info, vproc);
 	else
-- 
2.39.5

