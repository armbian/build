From e99d7b75b87ad7456224d59c4ab08d863517c82a Mon Sep 17 00:00:00 2001
From: "steve.jeong" <jkhpro1003@gmail.com>
Date: Tue, 19 Jul 2022 17:28:37 +0900
Subject: [PATCH 97/99] ODROID-M1: dtb/dtbo: Add spi overlay

Signed-off-by: steve.jeong <jkhpro1003@gmail.com>
Change-Id: Ia70ede411e3b8910b13fbf00996248f20337164e
---
 .../dts/rockchip/overlays/odroidm1/Makefile   |  1 +
 .../dts/rockchip/overlays/odroidm1/spi0.dts   | 22 +++++++++++++++++++
 2 files changed, 23 insertions(+)
 create mode 100644 arch/arm64/boot/dts/rockchip/overlays/odroidm1/spi0.dts

diff --git a/arch/arm64/boot/dts/rockchip/overlays/odroidm1/Makefile b/arch/arm64/boot/dts/rockchip/overlays/odroidm1/Makefile
index dcd692f5331d..3adb4ae5bd79 100644
--- a/arch/arm64/boot/dts/rockchip/overlays/odroidm1/Makefile
+++ b/arch/arm64/boot/dts/rockchip/overlays/odroidm1/Makefile
@@ -5,6 +5,7 @@ dtbo-y += \
 	pwm1.dtbo \
 	pwm2.dtbo \
 	pwm9.dtbo \
+	spi0.dtbo \
 	uart0-with-ctsrts.dtbo \
 	uart0.dtbo \
 	uart1.dtbo
diff --git a/arch/arm64/boot/dts/rockchip/overlays/odroidm1/spi0.dts b/arch/arm64/boot/dts/rockchip/overlays/odroidm1/spi0.dts
new file mode 100644
index 000000000000..f17f6ecb67a2
--- /dev/null
+++ b/arch/arm64/boot/dts/rockchip/overlays/odroidm1/spi0.dts
@@ -0,0 +1,22 @@
+/dts-v1/;
+/plugin/;
+
+/ {
+	fragment@0 {
+		target = <&spi0>;
+
+		__overlay__ {
+			status = "okay";
+
+			pinctrl-0 = <&spi0m1_cs0 &spi0m1_pins>;
+
+			spidev: spidev@0 {
+				status = "okay";
+				compatible = "odroid,spi-dev";
+				reg = <0>;
+				/* spi default max clock 100Mhz */
+				spi-max-frequency = <100000000>;
+			};
+		};
+	};
+};
-- 
2.37.3

