From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Ricardo Pardini <ricardo@pardini.net>
Date: Sun, 18 Feb 2024 14:37:47 +0100
Subject: rk3588-blueberry-edge-v12.dts: add KEY_VOLUMEUP adc-keys for RECOVERY
 button to work again

---
 arch/arm/dts/rk3588-blueberry-edge-v12.dts | 17 ++++++++++
 1 file changed, 17 insertions(+)

diff --git a/arch/arm/dts/rk3588-blueberry-edge-v12.dts b/arch/arm/dts/rk3588-blueberry-edge-v12.dts
index 27ea53a7f93..5dd31189e3d 100644
--- a/arch/arm/dts/rk3588-blueberry-edge-v12.dts
+++ b/arch/arm/dts/rk3588-blueberry-edge-v12.dts
@@ -13,6 +13,23 @@
 	model = "Mekotronics R58X-4G (RK3588 EDGE LP4x V1.2 BlueBerry Board)";
 	compatible = "rockchip,rk3588-blueberry-edge-v12-linux", "rockchip,rk3588";
 
+	// This is needed for the RECOVERY button to actually trigger LOADER mode when pressed during boot
+	adc-keys {
+		compatible = "adc-keys";
+		io-channels = <&saradc 1>;
+		io-channel-names = "buttons";
+		keyup-threshold-microvolt = <1800000>;
+		u-boot,dm-pre-reloc;
+		status = "okay";
+
+		volumeup-key {
+			u-boot,dm-pre-reloc;
+			linux,code = <KEY_VOLUMEUP>;
+			label = "volume up";
+			press-threshold-microvolt = <1750>;
+		};
+	};
+
 	vcc12v_dcin: vcc12v-dcin {
 		u-boot,dm-pre-reloc;
 		compatible = "regulator-fixed";
-- 
Armbian

