From 2d11bc862132c1b5229c9ea6af2fb5464986896c Mon Sep 17 00:00:00 2001
From: Vyacheslav Bocharov <devel@lexina.in>
Date: Mon, 23 Aug 2021 12:07:54 +0300
Subject: [PATCH 2/2] Fix mmc boot order to eMMC, microSD. Add check partitions
 4,5 from eMMC for boot.scr

Signed-off-by: Vyacheslav Bocharov <devel@lexina.in>
---
 include/config_distro_bootcmd.h | 2 +-
 include/configs/meson64.h       | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/include/config_distro_bootcmd.h b/include/config_distro_bootcmd.h
index 2627c2a6a5..c0940368bc 100644
--- a/include/config_distro_bootcmd.h
+++ b/include/config_distro_bootcmd.h
@@ -477,7 +477,7 @@
 	\
 	"scan_dev_for_boot_part="                                         \
 		"part list ${devtype} ${devnum} -bootable devplist; "     \
-		"env exists devplist || setenv devplist 1; "              \
+		"env exists devplist || setenv devplist 1 4 5; "          \
 		"for distro_bootpart in ${devplist}; do "                 \
 			"if fstype ${devtype} "                           \
 					"${devnum}:${distro_bootpart} "   \
diff --git a/include/configs/meson64.h b/include/configs/meson64.h
index 17ebccd2c4..1b17543772 100644
--- a/include/configs/meson64.h
+++ b/include/configs/meson64.h
@@ -67,8 +67,8 @@
 #ifndef BOOT_TARGET_DEVICES
 #define BOOT_TARGET_DEVICES(func) \
 	func(ROMUSB, romusb, na)  \
-	func(MMC, mmc, 0) \
 	func(MMC, mmc, 1) \
+	func(MMC, mmc, 0) \
 	func(MMC, mmc, 2) \
 	BOOT_TARGET_DEVICES_USB(func) \
 	BOOT_TARGET_NVME(func) \
-- 
2.30.2

