From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Marvin Wewer <mwewer37@proton.me>
Date: Sat, 25 Oct 2025 10:54:53 +0000
Subject: clk: sunxi: Add PCIe and USB3 clock support for SUN55I A523

Signed-off-by: Marvin Wewer <mwewer37@proton.me>
---
 drivers/clk/sunxi/clk_a523.c                             | 3 +++
 dts/upstream/include/dt-bindings/clock/sun55i-a523-ccu.h | 1 +
 2 files changed, 4 insertions(+)

diff --git a/drivers/clk/sunxi/clk_a523.c b/drivers/clk/sunxi/clk_a523.c
index 111111111111..222222222222 100644
--- a/drivers/clk/sunxi/clk_a523.c
+++ b/drivers/clk/sunxi/clk_a523.c
@@ -46,6 +46,8 @@ static struct ccu_clk_gate a523_gates[] = {
 	[CLK_BUS_EHCI0]		= GATE(0xa8c, BIT(4)),
 	[CLK_BUS_EHCI1]		= GATE(0xa8c, BIT(5)),
 	[CLK_BUS_OTG]		= GATE(0xa8c, BIT(8)),
+	[CLK_USB3_REF]		= GATE(0x0A84, BIT(31)),
+	[CLK_PCIE_AUX]		= GATE(0xaa0, BIT(31)),
 };
 
 static struct ccu_reset a523_resets[] = {
@@ -75,6 +77,7 @@ static struct ccu_reset a523_resets[] = {
 	[RST_BUS_EHCI0]		= RESET(0xa8c, BIT(20)),
 	[RST_BUS_EHCI1]		= RESET(0xa8c, BIT(21)),
 	[RST_BUS_OTG]		= RESET(0xa8c, BIT(24)),
+	[RST_BUS_PCIE_USB3]	= RESET(0xaac, BIT(24)),
 };
 
 const struct ccu_desc a523_ccu_desc = {
diff --git a/dts/upstream/include/dt-bindings/clock/sun55i-a523-ccu.h b/dts/upstream/include/dt-bindings/clock/sun55i-a523-ccu.h
index 111111111111..222222222222 100644
--- a/dts/upstream/include/dt-bindings/clock/sun55i-a523-ccu.h
+++ b/dts/upstream/include/dt-bindings/clock/sun55i-a523-ccu.h
@@ -185,5 +185,6 @@
 #define CLK_FANOUT0		176
 #define CLK_FANOUT1		177
 #define CLK_FANOUT2		178
+#define CLK_USB3_REF		179
 
 #endif /* _DT_BINDINGS_CLK_SUN55I_A523_CCU_H_ */
-- 
Armbian

