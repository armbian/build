BOOTDIR='u-boot-odroidxu'
OFFSET=4

BOOTSOURCE=$MAINLINE_UBOOT_SOURCE
BOOTBRANCH='tag:v2016.09'
BOOTCONFIG=odroid-xu3_defconfig
UBOOT_FILES="sd_fusing.sh xu4_blobs/bl1.bin.hardkernel xu4_blobs/bl2.bin.hardkernel.1mb_uboot u-boot-dtb.bin xu4_blobs/tzsw.bin.hardkernel"
BOOTSCRIPT="boot-odroid-xu4-default.cmd:boot.cmd"
BOOTENV_FILE='odroidxu4-default.txt'
HAS_UUID_SUPPORT=yes


case $BRANCH in
	default)

	KERNELSOURCE='https://github.com/hardkernel/linux'
	KERNELBRANCH='branch:odroidxu3-3.10.y'
	KERNELDIR='linux-odroidxu4'
	;;

	next)

	KERNELSOURCE=$MAINLINE_KERNEL_SOURCE
	KERNELBRANCH=$MAINLINE_KERNEL_BRANCH
        KERNELDIR=$MAINLINE_KERNEL_DIR
	;;
esac

CPUMIN=600000
CPUMAX=1800000

SERIALCON=ttySAC2

write_uboot_platform()
{
	# for sdcard (note: assuming emmc offset would be 0/30/62/2110 & device is mmcblk0boot0)
    	bl1_position=1
	bl2_position=31
	uboot_position=63
	tzsw_position=2111

	dd if=$1/bl1.bin.hardkernel of=$2 seek=$bl1_position conv=fsync >/dev/null 2>&1
	dd if=$1/bl2.bin.hardkernel.1mb_uboot of=$2 seek=$bl2_position conv=fsync >/dev/null 2>&1
	dd if=$1/u-boot-dtb.bin of=$2 bs=512 seek=$uboot_position conv=fsync >/dev/null 2>&1
	dd if=$1/tzsw.bin.hardkernel of=$2 seek=$tzsw_position conv=fsync >/dev/null 2>&1	
}

family_tweaks()
{
	echo "blacklist ina231_sensor" > $CACHEDIR/sdcard/etc/modprobe.d/blacklist-odroid.conf
	chroot $CACHEDIR/sdcard /bin/bash -c "apt-get -y -qq remove --auto-remove lirc >/dev/null 2>&1"
}
