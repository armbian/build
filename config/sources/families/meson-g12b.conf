source "${BASH_SOURCE%/*}/include/meson64_common.inc"
UBOOT_TARGET_MAP="u-boot-dtb.img;;u-boot.bin.sd.bin:u-boot.bin u-boot-dtb.img"
ASOUND_STATE="asound.state.meson64"
CPUMIN=1000000
CPUMAX=2400000
GOVERNOR=ondemand
OVERLAY_PREFIX='meson-g12b'

if [[ $BRANCH == legacy ]]; then

	UBOOT_USE_GCC='< 4.9'
	UBOOT_TOOLCHAIN2="arm-none-eabi-:< 5.0"
	UBOOT_COMPILER="aarch64-none-elf-"

	BOOTSOURCE='https://github.com/hardkernel/u-boot.git'
	BOOTBRANCH='branch:odroidg12-v2015.01'
	BOOTPATCHDIR='u-boot-odroid'
	BOOTDIR='u-boot-odroid'

	UBOOT_TARGET_MAP=';;sd_fuse/u-boot.bin'
	BOOTSCRIPT="boot-odroid-n2.ini:boot.ini"
	write_uboot_platform()
	{
		dd if=$1/u-boot.bin of=$2 bs=512 seek=1 conv=fsync > /dev/null 2>&1
	}

fi

family_tweaks()
{
	:
}

uboot_custom_postprocess()
{
	if [[ $BOARD == odroidn2 && $BRANCH != legacy ]]; then
		uboot_g12_postprocess $SRC/cache/sources/amlogic-boot-fip/odroid-n2 g12b
	fi
}
