#
# SPDX-License-Identifier: GPL-2.0
#
# Copyright (c) 2013-2023 Igor Pecovnik, igor@armbian.com
#
# This file is a part of the Armbian Build Framework
# https://github.com/armbian/build/
#
source "${BASH_SOURCE%/*}/include/rockchip64_common.inc"
OVERLAY_PREFIX='rk3566'
#fi

if [[ $BOARD == bigtreetech-cb2 || $BOARD == station-m2 || $BOARD == bananapir2pro ]]; then
	BOOTSOURCE='https://github.com/zhangyumingsh/u-boot'
	BOOTBRANCH='branch:stable-4.19-rock3'


	
	BOOTPATCHDIR="legacy/u-boot-btt-cb2"
	
	
	#BOOTDELAY=3
	CMD_MTDPARTS=y
	BOOTSCRIPT='boot-rockchip64.cmd:boot.cmd'
	
fi

SKIP_BOOTSPLASH="yes"

case $BRANCH in

	legacy)
		KERNELDIR='linux-rockchip64'

		if [[ $BOARD == bigtreetech-cb2 || $BOARD == station-m2 || $BOARD == bananapir2pro ]]; then
			KERNELSOURCE='https://github.com/zhangyumingsh/kernel-rk'
			declare -g KERNEL_MAJOR_MINOR="4.19" # Major and minor versions of this kernel.
			KERNELBRANCH='branch:kernel-4.19'
			LINUXCONFIG='linux-bigtree-cb2-'$BRANCH
			
			
			
			KERNELPATCHDIR='cb2-'$BRANCH
			LINUXFAMILY=bigtree-cb2
			
			
			#LINUXCONFIG='linux-rockchip64-'$BRANCH
			EXTRAWIFI="no"
			WIREGUARD="no"
			BOOTSCRIPT='boot-rockchip64.cmd:boot.cmd'
			
		
			
		else
			KERNELSOURCE='https://github.com/150balbes/rockchip-kernel'
			declare -g KERNEL_MAJOR_MINOR="5.10" # Major and minor versions of this kernel.
			KERNELBRANCH='branch:kernel-5.10'
			LINUXFAMILY=media
			LINUXCONFIG='linux-media-'$BRANCH
			KERNELPATCHDIR='media-'$BRANCH
		fi
		;;

	current)
	
		if [[ $BOARD == bigtreetech-cb2 || $BOARD == station-m2 || $BOARD == bananapir2pro ]]; then
	
		
		#KERNELSOURCE='https://github.com/zhangyumingsh/linux-rockchip_armbian.git'
		KERNELSOURCE='https://github.com/armbian/linux-rockchip.git'
		declare -g KERNEL_MAJOR_MINOR="6.1" # Major and minor versions of this kernel.
		KERNELBRANCH="branch:rk-6.1-rkr1"
		LINUXCONFIG='linux-bigtree-cb2-'$BRANCH
		KERNELPATCHDIR='cb2-'$BRANCH
		LINUXFAMILY=bigtree-cb2
	
		fi
		;;

	edge)


		KERNELSOURCE='https://github.com/armbian/linux-rockchip.git'
		KERNELBRANCH='branch:rk-6.1-rkr3'

		declare -g KERNEL_MAJOR_MINOR="6.1" # Major and minor versions of this kernel.	
		KERNELPATCHDIR='cb2-'$BRANCH
		LINUXFAMILY=bigtree-cb2
		LINUXCONFIG=linux-bigtree-cb2-current
		EXTRAWIFI="no"
		WIREGUARD="no"
		BOOTSCRIPT='boot-rockchip64.cmd:boot.cmd'

		;;
esac

prepare_boot_configuration
