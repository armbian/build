#
# SPDX-License-Identifier: GPL-2.0
#
# Copyright (c) 2013-2023 Igor Pecovnik, igor@armbian.com
#
# This file is a part of the Armbian Build Framework
# https://github.com/armbian/build/
#

source "${BASH_SOURCE%/*}/include/k3_common.inc"

declare -g LINUXFAMILY="k3"
declare -g ATFSOURCE="https://github.com/ARM-software/arm-trusted-firmware"

case "${BRANCH}" in

	vendor | vendor-rt)	# uses latest publicly released TI Processor SDK tag

		declare -g TI_PSDK_TAG="11.02.08"
		declare -g KERNELSOURCE="https://github.com/TexasInstruments/ti-linux-kernel"
		declare -g KERNEL_MAJOR_MINOR="6.12"
		declare -g KERNELBRANCH="tag:${TI_PSDK_TAG}"
		declare -g KERNEL_DESCRIPTION="Texas Instruments currently supported Processor SDK kernel"
		declare -g ATFBRANCH="commit:e0c4d3903b382bf34f552af53e6d955fae5283ab"
		declare -g OPTEE_BRANCH="commit:a9690ae39995af36a31b7a4f446f27ea0787e3a4"
		declare -g TI_LINUX_FIRMWARE_BRANCH="tag:${TI_PSDK_TAG}"
		declare -g BOOTSOURCE="https://github.com/TexasInstruments/ti-u-boot"
		declare -g BOOTBRANCH="tag:${TI_PSDK_TAG}"
		EXTRAWIFI="no"
		;;

	vendor-edge)		# uses latest pre-released TI Processor SDK tag

		declare -g KERNELSOURCE="https://github.com/TexasInstruments/ti-linux-kernel"
		declare -g KERNEL_MAJOR_MINOR="6.12"
		declare -g KERNELBRANCH="branch:ti-linux-6.12.y"
		declare -g KERNEL_DESCRIPTION="Texas Instruments latest pre-released Processor SDK kernel"
		declare -g ATFBRANCH="branch:master"
		declare -g OPTEE_BRANCH="branch:master"
		declare -g TI_LINUX_FIRMWARE_BRANCH="branch:ti-linux-firmware"
		declare -g BOOTSOURCE="https://github.com/TexasInstruments/ti-u-boot"
		declare -g BOOTBRANCH="branch:ti-u-boot-2025.01"
		EXTRAWIFI="no"
		;;

esac

case "${BOOT_SOC}" in

	am62l)				# update commit sha with each update of "vendor"/"vendor-rt" until 62L ATF in upstream

		declare -g ATFSOURCE="https://github.com/TexasInstruments/arm-trusted-firmware"
		if [[ "${BRANCH}" == "vendor" || "${BRANCH}" == "vendor-rt" ]]; then
			declare -g ATFBRANCH="commit:5939ceaeb664b8da5499dc4ecfa1caa7f5bcc31a"
		elif [[ "${BRANCH}" == "vendor-edge" ]]; then
			declare -g ATFBRANCH="branch:ti-master"
		fi
		;;

esac
