# Rockchip RK3566 quad core 2GB-8GB GBE eMMC NVMe USB3 WiFi
BOARD_NAME="Bigtreetech CB2"
BOARDFAMILY="cb2"
BOOTCONFIG="rock-3c-rk3566_defconfig"
KERNEL_TARGET="legacy,current,edge"
SRC_CMDLINE="console=ttyS02,1500000 console=tty0"
BOOTFS_TYPE="fat"
BOOT_FS_LABEL="BOOT"
OVERLAY_PREFIX="rk3566-bigtree-cb2"
BOOT_FDT_FILE="rockchip/rk3566-bigtreetech-cb2.dtb"

function post_family_tweaks_bsp__bigtreetech-cb2_BSP() {
    display_alert "$BOARD" "Installing board tweaks" "info"

	if [[ $BRANCH == legacy ]]; then

		# Bluetooth for most of others (custom patchram is needed only in legacy)
		install -m 755 $SRC/packages/bsp/rk3399/brcm_patchram_plus_rk3399 $destination/usr/bin
		cp $SRC/packages/bsp/rk3399/rk3399-bluetooth.service $destination/lib/systemd/system/

	fi

	return 0
}

#function post_family_tweaks__station_m2() {
#    display_alert "$BOARD" "Installing board tweaks" "info"
#	# cp -R $SRC/packages/blobs/bigtreetech/firmware/* $SDCARD/lib/firmware/rtl_bt/
#	cp -R $SRC/packages/blobs/bigtreetech/firmware/* $SDCARD/lib/firmware/
#	if [[ $BRANCH == legacy ]]; then
#		install -m 755 $SRC/packages/blobs/bigtreetech/firmware/rtk_hciattach $SDCARD/usr/bin/rtk_hciattach
#		sed -e 's/exit 0//g' -i $SDCARD/etc/rc.local
#		echo "su -c 'insmod /usr/lib/modules/4.19.232-legacy-bigtree-cb2/kernel/drivers/bluetooth/hci_uart.ko'" >> $SDCARD/etc/rc.local
#		echo "su -c '/usr/bin/rtk_hciattach -n -s 115200 /dev/ttyS1 rtk_h5 &'" >> $SDCARD/etc/rc.local
#		echo "exit 0" >> $SDCARD/etc/rc.local
#	fi
#
#	return 0
#}





#BOARD_NAME="Bigtree CB2"
#BOARDFAMILY="cb2"
#BOOTCONFIG="bigtree-cb2-rk3566_defconfig"
#KERNEL_TARGET="legacy,current,edge"
#FULL_DESKTOP="yes"
#BOOT_LOGO="desktop"
#BOOT_FDT_FILE="rockchip/rk3566-bigtreetech-cb2.dtb"
##SRC_EXTLINUX="yes"
#SRC_CMDLINE="console=ttyS02,1500000 console=tty0"
##ASOUND_STATE="asound.state.station-m2"
#BOOT_SCENARIO="spl-blobs"
#WIREGUARD="no"
#BOOT_SUPPORT_SPI="yes"
#BOOT_SPI_RKSPI_LOADER="yes"
#IMAGE_PARTITION_TABLE="gpt"
#BOOTFS_TYPE="fat"

#function post_family_tweaks__bigtree_cb2() {
#    display_alert "$BOARD" "Installing board tweaks" "info"
#
#	cp -R $SRC/packages/blobs/rtl8723bt_fw/* $SDCARD/lib/firmware/rtl_bt/
#	cp -R $SRC/packages/blobs/cb2/firmware/* $SDCARD/lib/firmware/
#
#	return 0
#}
