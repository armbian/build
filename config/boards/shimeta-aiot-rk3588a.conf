#Rockchip RK3588 SoC octa core 4-16GB SoC 1Gbe eMMC USB3 USB2 HDMI Type-c LVDS EDP EDPx MIPI MIPI_CAN 4G/5G Module,SATA，HDMI in，Ir
#Note: Optional 2k EEPROM, PCIe switchable to M.2, speaker output (supports left/right channel output, max. dual 20W/4Ω or 10W/8Ω), eMMC supports 16–128GB. This development board has three versions: V1.1,V1.2,V1.3,V2.0,V3.1
#Note: This board supports M.2 SSD interfaces and 16GB memory under version V3.1.
BOARD_NAME="AIoT RK3588A"
BOARD_VENDOR="shimeta"
BOARDFAMILY="rockchip-rk3588"
BOARD_MAINTAINER="ghhccghk"
BOOTCONFIG="aiot_rk3588a_defconfig"
BOOT_SOC="rk3588"
KERNEL_TARGET="vendor"
KERNEL_TEST_TARGET="vendor"
FULL_DESKTOP="yes"
BOOT_LOGO="desktop"
BOOT_FDT_FILE="rockchip/rk3588-aiot-rk3588a.dtb"
IMAGE_PARTITION_TABLE="gpt"

function post_family_tweaks__aiotrk3588a_udev_rules() {
	display_alert "$BOARD" "Renaming AIoT RK3588A Audios" "info"

	mkdir -p $SDCARD/etc/udev/rules.d/
	echo 'SUBSYSTEM=="sound", ENV{ID_PATH}=="platform-hdmi1-sound", ENV{SOUND_DESCRIPTION}="HDMI1 Audio"' >> $SDCARD/etc/udev/rules.d/90-naming-audios.rules
	echo 'SUBSYSTEM=="sound", ENV{ID_PATH}=="platform-hdmiin-sound", ENV{SOUND_DESCRIPTION}="HDMI-In Audio"' >> $SDCARD/etc/udev/rules.d/90-naming-audios.rules
	echo 'SUBSYSTEM=="sound", ENV{ID_PATH}=="platform-es8388-sound", ENV{SOUND_DESCRIPTION}="ES8388 Audio"' >> $SDCARD/etc/udev/rules.d/90-naming-audios.rules

   	display_alert "$BOARD" "Enabling ES8388 output channels" "info"

    if [ ! -f $SDCARD/etc/rc.local ]; then
    	echo -e '#!/bin/bash\nexit 0' > $SDCARD/etc/rc.local
        chmod +x $SDCARD/etc/rc.local
    fi

   	sed -i '/^exit 0/i # Enable ES8388 Audio Channels\namixer -D hw:rockchipes8388 cset numid=55 on > /dev/null 2>&1\namixer -D hw:rockchipes8388 cset numid=56 on > /dev/null 2>&1\n' $SDCARD/etc/rc.local

	return 0
}
