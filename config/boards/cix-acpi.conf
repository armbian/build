# Cix CD8180/CD8160 SoC 12 core 8-64GB RAM PCIe 4.0
BOARD_NAME="Cix-ACPI"
BOARD_VENDOR="cixtech"
BOARDFAMILY="cix-p1"
KERNEL_TARGET="current, edge, vendor"
FULL_DESKTOP="yes"
BOOT_LOGO="desktop"
BOARD_MAINTAINER="HeyMeco"

if [[ "${BRANCH}" == "vendor" ]]; then
	declare -g BOARD_FIRMWARE_INSTALL="-full" # Install full firmware for V12 mali_csffw.bin
	MODULES_BLACKLIST="mali_kbase snd_soc_sky1_sound_card snd_soc_cdns_i2s_mc snd_soc_rt5682s snd_soc_hdmi_codec" # Use Panthor instead but have Mali in the kernel, Disable temporarily broken audio drivers
fi

if [[ "${BRANCH}" == "current" ]] || [[ "${BRANCH}" == "edge" ]]; then
	MODULES_BLACKLIST="armchina_npu" # Disable armchina_npu driver as the kernel crashes on boot with it enabled
fi

function post_family_tweaks__cix_acpi_mesa_backports() {
	display_alert "Installing mesa-vulkan-drivers from backports" "cix-acpi" "info"

	# Only install on Debian Trixie
	if [[ "${RELEASE}" == "trixie" && "${DISTRIBUTION}" == "Debian" ]]; then
		# Update mesa from backports
		# Note: trixie-backports is already configured by Armbian
		chroot_sdcard_apt_get install -t trixie-backports mesa-vulkan-drivers

		display_alert "mesa-vulkan-drivers installed from trixie-backports" "cix-acpi" "info"
	else
		display_alert "Skipping mesa-vulkan-drivers backports install (not Debian Trixie)" "${RELEASE}" "warn"
	fi
}
