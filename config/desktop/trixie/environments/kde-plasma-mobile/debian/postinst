# overwrite stock lightdm greeter configuration
 #if [ -d /etc/armbian/lightdm ]; then cp -R /etc/armbian/lightdm /etc/; fi
#if [ -f /etc/lightdm/slick-greeter.conf ]; then sed -i 's/armbian03-Dre0x-Minum-dark-blurred-3840x2160.jpg/armbian-4k-black-psycho-gauss.jpg/g' /etc/lightdm/slick-greeter.conf; fi

# Disable Pulseaudio timer scheduling which does not work with sndhdmi driver
if [ -f /etc/pulse/default.pa ]; then sed "s/load-module module-udev-detect$/& tsched=0/g" -i  /etc/pulse/default.pa; fi

# enable pulse audio
systemctl preset pulseaudio.service

#configure sddm
mkdir -p /etc/sddm.conf.d
cat <<- EOF > /etc/sddm.conf.d/armbian.conf
	[Theme]
	Current=breeze
	[General]
	InputMethod=qtvirtualkeyboard
	[X11]
	DisplayCommand=/usr/share/sddm/scripts/Xsetup
	[Wayland]
	CompositorCommand=weston --shell=kiosk # @TODO figure out how to rotate with weston and wayland
EOF
