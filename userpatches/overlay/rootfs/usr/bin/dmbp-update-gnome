#!/bin/bash
# Credit to https://unix.stackexchange.com/a/771693

# Disable Gnome automatic screen timeout.
gsettings set org.gnome.desktop.session idle-delay 0
gsettings set org.gnome.desktop.screensaver lock-delay 0
gsettings set org.gnome.settings-daemon.plugins.power sleep-inactive-ac-timeout 0

# Disable Gnome wallpaper.
gsettings set org.gnome.desktop.background picture-options 'none'
gsettings set org.gnome.desktop.background primary-color '#000000'

# Disable Gnome Hide Top Bar extension's intellihide mode.
# (Top bar should always be hidden)
gnome-extensions enable hidetopbar@mathieu.bidon.ca
dconf write /org/gnome/shell/extensions/hidetopbar/enable-intellihide false

# Disable Gnome overview at startup
# (The ONLY other way to do this is through an extension and we're not doing that -_-).
# (Thanks Gnome developers!)
MTIME=50
for ((i=0; i<$MTIME; i++)); do
  read -r DUMMY DUMMY IS_OVERVIEW <<< "$(dbus-send --print-reply=literal --session --dest=org.gnome.Shell --type=method_call /org/gnome/Shell org.freedesktop.DBus.Properties.Get string:org.gnome.Shell string:OverviewActive)"
  if [[ "$IS_OVERVIEW" = "true" ]] ; then
    /usr/bin/dbus-send --session --dest=org.gnome.Shell --type=method_call /org/gnome/Shell org.freedesktop.DBus.Properties.Set string:org.gnome.Shell string:OverviewActive variant:boolean:false
    exit
  fi
  sleep 0.1
done

