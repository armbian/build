# nginx WebDAV configuration for ccache remote storage
# Copy to /etc/nginx/sites-available/ccache-webdav
# Then: ln -s /etc/nginx/sites-available/ccache-webdav /etc/nginx/sites-enabled/
#
# Prepare storage directory:
#   mkdir -p /var/cache/ccache-webdav/ccache
#   chown -R www-data:www-data /var/cache/ccache-webdav
#
# WARNING: No authentication configured.
# Use ONLY in a fully trusted private network.
# For auth, add auth_basic directives. See nginx WebDAV documentation.
# Note: ccache does not support HTTPS directly. Use a reverse proxy for TLS.
# Requires: nginx with http_dav_module (e.g. nginx-full or nginx-extras on Debian/Ubuntu)

server {
    listen 8088;
    server_name _;
    root /var/cache/ccache-webdav;

    location /ccache/ {
        dav_methods PUT DELETE;
        create_full_put_path on;
        dav_access user:rw group:rw all:r;
        client_max_body_size 100M;
        autoindex on;
    }
}
